@using CarsShop.Models
@model CarDataList
@{
    ViewBag.Title = "SearchResult";
}

<h2 style="text-align:center">Результаты поиска</h2>
<input id="compare-button" type="button" class="btn btn-default" value="Сравнить цены">
@foreach (Car c in Model.Cars)
{
    <div class="list-group" id="@c.CarId">
        <a href="@Url.Action("Viewsplusplus", "UserActions", new { CarId = c.CarId })" class="list-group-item">
            <div class="media col-md-3" style="border:#808080">
                <figure class="pull-left">
                    @foreach (Picture pic in Model.Pictures)
                    {
                        if (pic.PicId == c.CarId)
                        {
                            @Html.Raw("<img style = 'width:260px; height:200px; border:1px solid rgba(0,148,225,0.3);' src=\"data:image/jpeg;base64,"
                                                      + Convert.ToBase64String(pic.Image) + "\" />")
                        }

                    }

                </figure>
            </div>
            <div class="col-md-6">
                <h4 class="list-group-item-heading"> Описание </h4>
                <p class="list-group-item-text" style="font-size : 20px">
                    @(c.Mark + " " + c.Series + " " + c.BodyType + " " + c.Color + " " + "Цвет" + " " +
                   c.Drive + " " + "Привод" + " " + c.FuelType + " " + c.Transmission + " " + "Год выпуска" + " " + c.Year
                   + " " + c.Country + " " + c.City)
                </p>
            </div>
            <div class="col-md-3 text-center">
                <h2> @c.CountViews <small> Просмотров </small></h2>

                Выбрать <br>для сравнения<br>
                <input class="compare-checkbox" type="checkbox" />

            </div>
        </a>
    </div>
}

<script>
    $("#compare-button").click(function () {
        var selectedCars = [];
        $(".compare-checkbox:checked").each(function (index, element) {
            selectedCars.push($(element).parent().parent().parent().attr("id"));
        });
        window.location.href = "/Search/Compare?cars=" + JSON.stringify(selectedCars);
    });
</script>
